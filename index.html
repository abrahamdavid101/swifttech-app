  <!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Dashboard</title>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
      <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
      <link rel="icon" href="favicon.png" type="image/x-icon">
      <style>
          * {
              margin: 0;
              padding: 0;
              box-sizing: border-box;
          }

          body {
              font-family: 'Montserrat', sans-serif;
              line-height: 1.6;
              background: #f8f9fa;
              position: relative;
          }

          .cta-button {
              padding: 8px 16px;
              border: none;
              border-radius: 5px;
              cursor: pointer;
              background: #f8f9fa;
              color: #333;
              font-family: 'Montserrat', sans-serif;
          }

          .primary-btn {
              background: #1a73e8;
              color: white;
          }

          .cta-button:hover {
              opacity: 0.9;
          }

          .nav-menu {
              display: flex;
              gap: 20px;
              margin-bottom: 30px;
              overflow-x: auto;
              -webkit-overflow-scrolling: touch;
              scrollbar-width: none;
              -ms-overflow-style: none;
          }

          .nav-menu::-webkit-scrollbar {
              display: none;
          }

          .nav-item {
              padding: 10px 15px;
              border-radius: 5px;
              cursor: pointer;
              color: #666;
              white-space: nowrap;
              flex-shrink: 0;
          }

          .nav-item:hover {
              background: #1a73e8;
              color: white;
          }

          @media screen and (max-width: 768px) {
              .nav-menu {
                  gap: 10px;
                  padding-bottom: 5px;
              }
              
              .nav-item {
                  padding: 8px 12px;
                  font-size: 0.9rem;
              }
          }
      </style>  </head>
  <body>
      <section class="dashboard" style="padding: 10px; background: #f8f9fa;">
          <div class="dashboard-container" style="max-width: 1200px; margin: 0 auto;">
              <div class="dashboard-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: nowrap;">
                  <h2 style="color: #333; white-space: nowrap; font-size: clamp(1rem, 4vw, 1.5rem);">Dashboard <img src="https://www.swifttech.me/swift.png" alt="Dashboard Icon" style="width: clamp(50px, 10vw, 70px); height: auto; margin-right: 8px; vertical-align: middle; font-size: 14px;"></h2>                  
                  <div class="header-actions" style="display: flex; align-items: center; gap: 5px;">
                                        <button class="cta-button" style="padding: clamp(5px, 2vw, 10px);" onclick="showNotifications()"><i class="fas fa-bell"></i></button>
                                        <div id="notificationsPanel" style="display: none; position: absolute; top: 60px; right: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); width: 300px; max-height: 400px; overflow-y: auto; z-index: 1000;">
                                            <div style="padding: 15px; border-bottom: 1px solid #eee;">
                                                <h3 style="margin: 0; color: #333;">Notifications</h3>
                                            </div>
                                            <div id="notificationsList" style="padding: 10px;">
                                                <div class="notification-item" style="padding: 10px; text-align: center; color: #666;">
                                                    No notifications yet
                                                </div>
                                            </div>
                                        </div>
                                        <script>
                                            function showNotifications() {
                                                const panel = document.getElementById('notificationsPanel');
                                                panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
                              
                                                fetch('https://swifttech-server.onrender.com/notifications', {
                                                    method: 'POST',
                                                    headers: {
                                                        'Content-Type': 'application/json'
                                                    },
                                                    body: JSON.stringify({
                                                        email: localStorage.getItem('userEmail')                                                    })
                                                })
                                                .then(response => response.json())
                                                .then(notifications => {
                                                    const notificationsList = document.getElementById('notificationsList');
                                                    if (!notifications || notifications.length === 0) {
                                                        notificationsList.innerHTML = `
                                                            <div class="notification-item" style="padding: 10px; text-align: center; color: #666;">
                                                                No notifications yet
                                                            </div>
                                                        `;
                                                        return;
                                                    }
                                                    notificationsList.innerHTML = notifications.map(notification => `
                                                        <div class="notification-item" style="padding: 10px; border-bottom: 1px solid #f5f5f5;">
                                                            <div style="font-weight: 500; color: #333;">${notification.message}</div>
                                                            <div style="font-size: 0.8rem; color: #666; margin-top: 5px;">${new Date(notification.timestamp).toLocaleDateString()}</div>
                                                        </div>
                                                    `).join('');
                                                })
                                                .catch(error => {
                                                    console.error('Error fetching notifications:', error);
                                                    const notificationsList = document.getElementById('notificationsList');
                                                    notificationsList.innerHTML = `
                                                        <div class="notification-item" style="padding: 10px; text-align: center; color: #666;">
                                                            Error loading notifications. Please try again later.
                                                        </div>
                                                    `;
                                                });
                                            }

                                            // Close notifications panel when clicking outside
                                            document.addEventListener('click', function(event) {
                                                const panel = document.getElementById('notificationsPanel');
                                                const button = event.target.closest('.cta-button');
                                                if (!button && !panel.contains(event.target) && panel.style.display === 'block') {
                                                    panel.style.display = 'none';
                                                }
                                            });
                                        </script>                                        <button class="cta-button" style="padding: clamp(5px, 2vw, 10px);" onclick="document.querySelector('[data-tab=profile]').click()"><i class="fas fa-user"></i></button>                      
                      <button class="cta-button primary-btn" style="white-space: nowrap; padding: clamp(5px, 2vw, 10px);" onclick="document.querySelector('[data-tab=hire]').click()">New Project</button>                  </div>
              </div>

              <div class="nav-menu">
                  <div class="nav-item active" data-tab="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</div>
                  <div class="nav-item" data-tab="templates"><i class="fas fa-file-code"></i> Templates</div>
                  <div class="nav-item" data-tab="snippets"><i class="fas fa-code"></i> Snippets</div>
                  <div class="nav-item" data-tab="courses"><i class="fas fa-graduation-cap"></i> Courses</div>
                  <div class="nav-item" data-tab="hire"><i class="fas fa-users"></i> Hire</div>
                  <div class="nav-item" data-tab="settings"><i class="fas fa-cog"></i> Settings</div>
                  <div class="nav-item" data-tab="subscription"><i class="fas fa-credit-card"></i> Subscription</div>
                  <div class="nav-item" data-tab="profile"><i class="fas fa-user-circle"></i> Profile</div>
              </div>

              <div id="dashboard" class="tab-content active">
                  <div class="dashboard-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                      <div class="stat-card" style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                          <h3 style="color: #666; font-size: 0.9rem; margin-bottom: 10px;">Active Projects</h3>
                          <p style="font-size: 1.8rem; color: #1a73e8; font-weight: bold;" id="activeProjects">Loading...</p>
                          <div style="display: flex; align-items: center; color: #28a745; font-size: 0.8rem;">
                              <i class="fas fa-arrow-up"></i>
                              <span style="margin-left: 5px;" id="projectsGrowth">Loading...</span>
                          </div>
                      </div>

                      <div class="stat-card" style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                          <h3 style="color: #666; font-size: 0.9rem; margin-bottom: 10px;">Total Budget</h3>
                          <p style="font-size: 1.8rem; color: #1a73e8; font-weight: bold;" id="totalBudget">Loading...</p>
                          <div style="display: flex; align-items: center; color: #28a745; font-size: 0.8rem;">
                              <i class="fas fa-arrow-up"></i>
                              <span style="margin-left: 5px;" id="budgetGrowth">Loading...</span>
                          </div>
                      </div>

                      <div class="stat-card" style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                          <h3 style="color: #666; font-size: 0.9rem; margin-bottom: 10px;">Completed Projects</h3>
                          <p style="font-size: 1.8rem; color: #1a73e8; font-weight: bold;" id="completedProjects">Loading...</p>
                          <div style="display: flex; align-items: center; color: #28a745; font-size: 0.8rem;">
                              <i class="fas fa-check-circle"></i>
                              <span style="margin-left: 5px;" id="tasksStatus">Loading...</span>
                          </div>
                      </div>
                  </div>

                  <div class="dashboard-content" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                      <div class="main-content" style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                          <h3 style="margin-bottom: 20px;">Recent Projects</h3>
                          <div class="project-list" id="projectList">
                              <div style="text-align: center; padding: 20px;">Loading projects...</div>
                          </div>
                      </div>

                      <div class="side-content" style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                          <h3 style="margin-bottom: 20px;">Current User</h3>
                          <div class="team-list" id="teamList">
                              <div style="text-align: center; padding: 20px;">Loading current user...</div>
                          </div>
                      </div>
                  </div>
              </div>

              <div id="templates" class="tab-content">
                  <div class="content-card" style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                      <h3>Templates</h3>
                      <div id="templatesList">Loading templates...</div>
                  </div>
              </div>

              <div id="snippets" class="tab-content">
                  <div class="content-card" style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                      <h3>Code Snippets</h3>
                      <div id="snippetsList">Loading snippets...</div>
                  </div>
              </div>

              <div id="hire" class="tab-content">
                  <div class="content-card" style="background: white; padding: 10px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                      <h3>Hire Developers</h3>
                      <div id="hireList">Loading developers...</div>
                  </div>
              </div>

              <div id="courses" class="tab-content">
                  <div class="content-card" style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                      <h3>Available Courses</h3>
                      <div id="coursesList">Loading courses...</div>
                  </div>
              </div>

              <div id="settings" class="tab-content">
                  <div class="content-card" style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                      <h3>Settings</h3>
                      <div id="settingsContent">Loading settings...</div>
                  </div>
              </div>

              <div id="subscription" class="tab-content">
                  <div class="content-card" style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                      <h3>Subscription Plans</h3>
                      <div id="subscriptionPlans">Loading plans...</div>
                  </div>
              </div>

              <div id="profile" class="tab-content">
                  <div class="content-card" style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                      <h3>User Profile</h3>
                      <div id="profileContent">Loading profile...</div>
                  </div>
              </div>
          </div>
      </section>

      <style>
          .nav-item.active {
              background: #1a73e8;
              color: white;
          }
          .tab-content {
              display: none;
          }
          .tab-content.active {
              display: block;
          }
      </style>

      <script>
          const API_URL = 'https://swifttech-server.onrender.com';

          // Check authentication state on page load and verify server connection
          async function checkAuthState() {
              const storedEmail = localStorage.getItem('userEmail');
              
              console.log('Stored email:', storedEmail);
              
              if (!storedEmail || storedEmail === 'null' || storedEmail === 'undefined' || !storedEmail.includes('@')) {
                  console.log('Invalid email - redirecting to login');
                  localStorage.clear();
                  setTimeout(() => {
                      window.location.href = 'login.html';
                  }, 70);
                  return;
              }
              
              try {
                  const response = await fetch(`${API_URL}/check-login-state`, {
                      method: 'POST',
                      headers: {
                          'Content-Type': 'application/json',
                          'Accept': 'application/json'
                      },
                      body: JSON.stringify({
                          email: storedEmail
                      })
                  });              
                  const data = await response.json();
                  
                  if (data.loginState === true) {
                      console.log(true);
                  } else {
                      window.location.href = 'login.html';
                  }
                  
                  } catch (error) {
                      console.error('Error checking login state:', error);
                      localStorage.clear();
                      window.location.replace('login.html');
                  }
              }

          checkAuthState();  
            
                    
                  document.querySelectorAll('.nav-item').forEach(item => {
                  item.addEventListener('click', () => {
                  document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                  document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                  
                  item.classList.add('active');
                  const tabId = item.getAttribute('data-tab');
                  document.getElementById(tabId).classList.add('active');

                  loadTabContent(tabId);
              });
          });

          async function renderTemplates(templates) {
              const userPlan = localStorage.getItem('userPlan') || 'free';
              const templatesList = document.getElementById('templatesList');
              const searchInput = document.createElement('input');
              searchInput.type = 'text';
              searchInput.placeholder = 'Search templates...';
              searchInput.style.fontFamily = "'Montserrat', sans-serif";              
              searchInput.className = 'search-input';
              searchInput.style.cssText = 'width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 5px;';
              
              const templatesGrid = document.createElement('div');
              templatesGrid.style.cssText = 'display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;';
              
              templatesList.innerHTML = '';
              templatesList.appendChild(searchInput);
              templatesList.appendChild(templatesGrid);

              const renderTemplateCards = (templatesData) => {
                  templatesGrid.innerHTML = Object.values(templatesData).map(template => {
                      const planValues = { 'free': 1, 'premium': 2, 'gold': 3 };
                      const userPlanValue = planValues[userPlan] || 1;
                      const templatePlanValue = planValues[template.plan] || 1;
                      const isAccessible = userPlanValue >= templatePlanValue;
                      const cardOpacity = isAccessible ? '1' : '0.7';
                      const cardPointerEvents = isAccessible ? 'auto' : 'none';
                      const buttonStyle = `
                          font-family: 'Montserrat', sans-serif;
                          width: 100%;
                          padding: 12px;
                          margin: 5px 0;
                          border-radius: 6px;
                          transition: all 0.3s ease;
                          font-weight: 500;
                          text-transform: uppercase;
                          letter-spacing: 0.5px;
                      `;
                      const activeButtonStyle = `
                          ${buttonStyle}
                          cursor: pointer;
                          background: #fff;
                          border: 2px solid #007bff;
                          color: #007bff;
                      `;
                      const disabledButtonStyle = `
                          ${buttonStyle}
                          background: #f5f5f5;
                          border: 2px solid #ddd;
                          color: #999;
                          cursor: not-allowed;
                      `;

                      return `
                          <div class="template-card" style="border: 1px solid #eee; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1); opacity: ${cardOpacity}; pointer-events: ${cardPointerEvents};">
                              <div class="position-relative">
                                  <img src="${template.imageURL}" alt="${template.name}" style="width: 100%; height: 200px; object-fit: cover;">
                              </div>
                              <div style="padding: 20px;">
                                  <h4 style="margin-bottom: 10px; color: #333; font-family: 'Montserrat', sans-serif;">${template.name}</h4>
                                  <p style="color: #666; font-size: 0.9em;">${template.description}</p>
                                  <div style="display: inline-block; padding: 6px 12px; border-radius: 4px; font-size: 0.85em; font-weight: 600; letter-spacing: 0.5px; margin-bottom: 15px; font-family: 'Montserrat', sans-serif; ${
                                                                        template.plan === 'free' ? 
                                                                        'background-color: #e8f5e9; color: #2e7d32; border: 1px solid #a5d6a7;' :
                                                                        template.plan === 'premium' ? 
                                                                        'background-color: #e3f2fd; color: #1565c0; border: 1px solid #90caf9;' :
                                                                        'background-color: #fff8e1; color: #f57f17; border: 1px solid #ffecb3;'
                                                                    }">
                                                                        ${template.plan.charAt(0).toUpperCase() + template.plan.slice(1)} Plan
                                                                    </div>
                                  
                                  <div style="margin: 15px 0;">
                                      ${template.tags.map(tag => `<span style="background: #f8f9fa; padding: 5px 12px; border-radius: 20px; margin-right: 8px; font-size: 0.8em; color: #666;">${tag}</span>`).join('')}
                                  </div>
                                      <button onclick="window.open('${template.previewURL}')" 
                                          style="${isAccessible ? activeButtonStyle : disabledButtonStyle}; ${isAccessible ? ':hover { background: #007bff; color: #fff; }' : ''}">
                                          Preview
                                      </button>
                                      <button onclick="window.open('${template.downloadURL}')"
                                          style="${isAccessible ? activeButtonStyle : disabledButtonStyle}; ${isAccessible ? ':hover { background: #007bff; color: #fff; }' : ''}">
                                          Download
                                      </button>
                                      <button onclick="navigator.clipboard.writeText('${template.id}')"
                                          style="${isAccessible ? activeButtonStyle : disabledButtonStyle}; ${isAccessible ? ':hover { background: #007bff; color: #fff; }' : ''}">
                                          Copy
                                      </button>
                                      ${!isAccessible ? `
                                          <div style="text-align: center; color: #666; font-family: 'Montserrat', sans-serif; margin-top: 10px;">
                                              Upgrade your plan to access this template
                                          </div>
                                      ` : ''}
                                  </div>
                              </div>
                          </div>
                      `;
                  }).join('');
              };

              searchInput.addEventListener('input', (e) => {
                  const searchTerm = e.target.value.toLowerCase();
                  const filteredTemplates = Object.values(templates).filter(template => 
                      template.name.toLowerCase().includes(searchTerm) || 
                      template.description.toLowerCase().includes(searchTerm) ||
                      template.tags.some(tag => tag.toLowerCase().includes(searchTerm))
                  );
                  renderTemplateCards(filteredTemplates);
              });

              renderTemplateCards(templates);
          }          
          
          async function renderSnippets(snippets) {
              const userPlan = localStorage.getItem('userPlan') || 'free';
              const snippetsList = document.getElementById('snippetsList');
              const searchInput = document.createElement('input');
              searchInput.type = 'text';
              searchInput.placeholder = 'Search snippets...';
              searchInput.style.fontFamily = "'Montserrat', sans-serif";
              searchInput.className = 'search-input';
              searchInput.style.cssText = 'width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 5px;';
              
              const snippetsGrid = document.createElement('div');
              snippetsGrid.style.cssText = 'display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;';
              
              snippetsList.innerHTML = '';
              snippetsList.appendChild(searchInput);
              snippetsList.appendChild(snippetsGrid);

              const renderSnippetCards = (snippetsData) => {
                  snippetsGrid.innerHTML = Object.values(snippetsData).map(snippet => {
                      const planValues = { 'free': 1, 'premium': 2, 'gold': 3 };
                      const userPlanValue = planValues[userPlan] || 1;
                      const snippetPlanValue = planValues[snippet.plan] || 1;
                      const isAccessible = userPlanValue >= snippetPlanValue;
                      const cardOpacity = isAccessible ? '1' : '0.7';
                      const cardPointerEvents = isAccessible ? 'auto' : 'none';
                      const buttonStyle = `
                          font-family: 'Montserrat', sans-serif;
                          width: 100%;
                          padding: 12px;
                          margin: 5px 0;
                          border-radius: 6px;
                          transition: all 0.3s ease;
                          font-weight: 500;
                          text-transform: uppercase;
                          letter-spacing: 0.5px;
                      `;
                      const activeButtonStyle = `
                          ${buttonStyle}
                          cursor: pointer;
                          background: #fff;
                          border: 2px solid #007bff;
                          color: #007bff;
                      `;
                      const disabledButtonStyle = `
                          ${buttonStyle}
                          background: #f5f5f5;
                          border: 2px solid #ddd;
                          color: #999;
                          cursor: not-allowed;
                      `;

                      return `
                          <div class="snippet-card" style="border: 1px solid #eee; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1); opacity: ${cardOpacity}; pointer-events: ${cardPointerEvents};">
                              <div style="padding: 20px;">
                                  <h4 style="margin-bottom: 10px; color: #333; font-family: 'Montserrat', sans-serif;">${snippet.name}</h4>
                                  <p style="color: #666; font-size: 0.9em;">${snippet.description}</p>
                                  <div style="display: inline-block; padding: 6px 12px; border-radius: 4px; font-size: 0.85em; font-weight: 600; letter-spacing: 0.5px; margin-bottom: 15px; font-family: 'Montserrat', sans-serif; ${
                                      snippet.plan === 'free' ? 
                                      'background-color: #e8f5e9; color: #2e7d32; border: 1px solid #a5d6a7;' :
                                      snippet.plan === 'premium' ? 
                                      'background-color: #e3f2fd; color: #1565c0; border: 1px solid #90caf9;' :
                                      'background-color: #fff8e1; color: #f57f17; border: 1px solid #ffecb3;'
                                  }">
                                      ${snippet.plan.charAt(0).toUpperCase() + snippet.plan.slice(1)} Plan
                                  </div>
                                  
                                  <div style="margin: 15px 0;">
                                      ${snippet.tags.map(tag => `<span style="background: #f8f9fa; padding: 5px 12px; border-radius: 20px; margin-right: 8px; font-size: 0.8em; color: #666;">${tag}</span>`).join('')}
                                  </div>
                                  <button onclick="previewSnippet('${snippet.id}')" 
                                      style="${isAccessible ? activeButtonStyle : disabledButtonStyle}; ${isAccessible ? ':hover { background: #007bff; color: #fff; }' : ''}">
                                      Preview
                                  </button>
                                  <button onclick="downloadSnippet('${snippet.id}')"
                                      style="${isAccessible ? activeButtonStyle : disabledButtonStyle}; ${isAccessible ? ':hover { background: #007bff; color: #fff; }' : ''}">
                                      Download
                                  </button>
                                  <button onclick="navigator.clipboard.writeText('${snippet.id}')"
                                      style="${isAccessible ? activeButtonStyle : disabledButtonStyle}; ${isAccessible ? ':hover { background: #007bff; color: #fff; }' : ''}">
                                      Copy
                                  </button>
                                  ${!isAccessible ? `
                                      <div style="text-align: center; color: #666; font-family: 'Montserrat', sans-serif; margin-top: 10px;">
                                          Upgrade your plan to access this snippet
                                      </div>
                                  ` : ''}
                              </div>
                          </div>
                      `;
                  }).join('');
              };

              searchInput.addEventListener('input', (e) => {
                  const searchTerm = e.target.value.toLowerCase();
                  const filteredSnippets = Object.values(snippets).filter(snippet => 
                      snippet.name.toLowerCase().includes(searchTerm) || 
                      snippet.description.toLowerCase().includes(searchTerm) ||
                      snippet.tags.some(tag => tag.toLowerCase().includes(searchTerm))
                  );
                  renderSnippetCards(filteredSnippets);
              });

              renderSnippetCards(snippets);
          }
          

          async function renderCourses(courses) {
              const userPlan = localStorage.getItem('userPlan') || 'free';
              const coursesList = document.getElementById('coursesList');
              const searchInput = document.createElement('input');
              searchInput.type = 'text';
              searchInput.placeholder = 'Search courses...';
              searchInput.style.fontFamily = "'Montserrat', sans-serif";
              searchInput.className = 'search-input';
              searchInput.style.cssText = 'width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 5px;';
              
              const coursesGrid = document.createElement('div');
              coursesGrid.style.cssText = 'display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;';
              
              coursesList.innerHTML = '';
              coursesList.appendChild(searchInput);
              coursesList.appendChild(coursesGrid);

              const renderCourseCards = (coursesData) => {
                  coursesGrid.innerHTML = Object.values(coursesData).map(course => {
                      const planValues = { 'free': 1, 'premium': 2, 'gold': 3 };
                      const userPlanValue = planValues[userPlan] || 1;
                      const coursePlanValue = planValues[course.plan] || 1;
                      const isAccessible = userPlanValue >= coursePlanValue;
                      const cardOpacity = isAccessible ? '1' : '0.7';
                      const cardPointerEvents = isAccessible ? 'auto' : 'none';
                      const buttonStyle = `
                          font-family: 'Montserrat', sans-serif;
                          width: 100%;
                          padding: 12px;
                          margin: 5px 0;
                          border-radius: 6px;
                          transition: all 0.3s ease;
                          font-weight: 500;
                          text-transform: uppercase;
                          letter-spacing: 0.5px;
                      `;
                      const activeButtonStyle = `
                          ${buttonStyle}
                          cursor: pointer;
                          background: #fff;
                          border: 2px solid #007bff;
                          color: #007bff;
                      `;
                      const disabledButtonStyle = `
                          ${buttonStyle}
                          background: #f5f5f5;
                          border: 2px solid #ddd;
                          color: #999;
                          cursor: not-allowed;
                      `;

                      return `
                          <div class="course-card" style="border: 1px solid #eee; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1); opacity: ${cardOpacity}; pointer-events: ${cardPointerEvents};">
                              <div class="position-relative">
                                  <img src="${course.imageURL}" alt="${course.name}" style="width: 100%; height: 200px; object-fit: cover;">
                              </div>
                              <div style="padding: 20px;">
                                  <h4 style="margin-bottom: 10px; color: #333; font-family: 'Montserrat', sans-serif;">${course.name}</h4>
                                  <p style="color: #666; font-size: 0.9em;">${course.description}</p>
                                  <div style="display: inline-block; padding: 6px 12px; border-radius: 4px; font-size: 0.85em; font-weight: 600; letter-spacing: 0.5px; margin-bottom: 15px; font-family: 'Montserrat', sans-serif; ${
                                      course.plan === 'free' ? 
                                      'background-color: #e8f5e9; color: #2e7d32; border: 1px solid #a5d6a7;' :
                                      course.plan === 'premium' ? 
                                      'background-color: #e3f2fd; color: #1565c0; border: 1px solid #90caf9;' :
                                      'background-color: #fff8e1; color: #f57f17; border: 1px solid #ffecb3;'
                                  }">
                                      ${course.plan.charAt(0).toUpperCase() + course.plan.slice(1)} Plan
                                  </div>
                                  <div style="margin: 15px 0;">
                                      ${course.tags.map(tag => `<span style="background: #f8f9fa; padding: 5px 12px; border-radius: 20px; margin-right: 8px; font-size: 0.8em; color: #666;">${tag}</span>`).join('')}
                                  </div>
                                      <button onclick="previewCourse('${course.id}')"
                                           style="${isAccessible ? activeButtonStyle : disabledButtonStyle}; ${isAccessible ? ':hover { background: #007bff; color: #fff; }' : ''}">
                                          Preview
                                      </button>
                                      <button onclick="startCourse('${course.id}')"
                                          style="${isAccessible ? activeButtonStyle : disabledButtonStyle}; ${isAccessible ? ':hover { background: #007bff; color: #fff; }' : ''}">
                                          Start Course
                                      </button>
                                      <button onclick="navigator.clipboard.writeText('${course.id}')"
                                          style="${isAccessible ? activeButtonStyle : disabledButtonStyle}; ${isAccessible ? ':hover { background: #007bff; color: #fff; }' : ''}">
                                          Copy
                                      </button>
                                      ${!isAccessible ? `
                                          <div style="text-align: center; color: #666; font-family: 'Montserrat', sans-serif; margin-top: 10px;">
                                              Upgrade your plan to access this course
                                          </div>
                                      ` : ''}
                                  </div>
                              </div>
                          </div>
                      `;
                  }).join('');
              };

              searchInput.addEventListener('input', (e) => {
                  const searchTerm = e.target.value.toLowerCase();
                  const filteredCourses = Object.values(courses).filter(course => 
                      course.name.toLowerCase().includes(searchTerm) || 
                      course.description.toLowerCase().includes(searchTerm) ||
                      course.tags.some(tag => tag.toLowerCase().includes(searchTerm))
                  );
                  renderCourseCards(filteredCourses);
              });

              renderCourseCards(courses);
          }

          

        async function renderHire(developers) {
              const cardContainer = document.getElementById('hireList');
              const developersGrid = document.createElement('div');
              developersGrid.style.cssText = 'display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;';
              cardContainer.innerHTML = '';
              cardContainer.appendChild(developersGrid);

              const cardStyle = `
                  background: #fff;
                  border-radius: 12px;
                  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                  margin: 10px;
                  padding: 15px;
                  transition: all 0.3s ease;
                  font-family: 'Montserrat', sans-serif;
              `;
          
              const buttonStyle = `
                  padding: 8px 16px;
                  border-radius: 6px;
                  border: none;
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s ease;
                  margin: 5px;
                  font-family: 'Montserrat', sans-serif;
              `;
          
              developersGrid.innerHTML = Object.values(developers).map(developer => `                  
              <div class="developer-card" style="${cardStyle}">
                      <div style="display: flex; align-items: start; gap: 20px;">
                                            <div style="position: relative;">
                                                <img src="${developer.profilePicture}" alt="${developer.name}" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover;">
                                                <div style="position: absolute; bottom: 3px; right: 3px; width: 15px; height: 15px; border-radius: 50%; background-color: ${developer.online === true ? '#2ecc71' : '#95a5a6'}; border: 2px solid white;"></div>
                                            </div>
                            <div style="flex-grow: 1;">
                              <div style="display: flex; justify-content: space-between; align-items: center;">
                                  <h3 style="margin: 0; color: #333; font-size: 1.1em;">
                                      ${developer.name}
                                      ${developer.verifiedBadge === true ? '<span><i class="fa-solid fa-circle-check" style="color: #0762f2;"></i></span>' : ''}
                                  </h3>
                                  <div style="display: flex; gap: 10px;">
                                      ${developer.linkedinProfile ? `<a href="${developer.linkedinProfile}" target="_blank" style="color: #0077b5;"><i class="fab fa-linkedin"></i></a>` : ''}
                                      ${developer.behanceProfile ? `<a href="${developer.behanceProfile}" target="_blank" style="color: #1769ff;"><i class="fab fa-behance"></i></a>` : ''}
                                  </div>
                              </div>
                              <div style="margin: 10px 0;">
                                  ${developer.languages.map(lang => 
                                      `<span style="background: #f8f9fa; padding: 5px 12px; border-radius: 20px; margin-right: 8px; font-size: 0.8em; color: #666;">${lang}</span>`
                                  ).join('')}
                              </div>
                              <div style="display: flex; align-items: center; gap: 20px; margin: 15px 0;">
                                  <div style="background: #e8f5e9; color: #2e7d32; padding: 5px 10px; border-radius: 4px;">
                                      Trust Score: ${developer.trustScore}/100
                                  </div>
                                  <div style="color: #666;">
                                      <i class="fas fa-star" style="color: #ffd700;"></i>
                                      ${developer.rating} (${developer.reviews} reviews)
                                  </div>
                              </div>
                          </div>
                      </div>
          
                      <div class="hire-form" style="display: none; margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee;">
                          <h4 style="margin: 0 0 15px 0; color: #333;">Project Details</h4>
                          <div style="display: grid; gap: 15px;">
                              <input type="text" id="projectName_${developer.id}" placeholder="Project Name" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                              <textarea id="projectDesc_${developer.id}" placeholder="Project Description" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; min-height: 100px;"></textarea>
                              <div style="display: flex; gap: 15px;">
                                  <input type="number" id="projectBudget_${developer.id}" placeholder="Budget ($)" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                  <input type="text" id="projectTimeframe_${developer.id}" placeholder="Timeframe" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                              </div>
                              <button onclick="submitHireRequest('${developer.id}')" style="${buttonStyle} background: #007bff; color: #fff;">
                                  Submit Request
                              </button>
                          </div>
                      </div>
          
                      <div class="action-buttons" style="margin-top: 20px;">
                          <button onclick="toggleHireForm(this)" style="${buttonStyle} background: #007bff; color: #fff;">
                              Hire Developer
                          </button>
                          ${developer.status === 'active' ? `
                              <button onclick="markComplete('${developer.id}')" style="${buttonStyle} background: #28a745; color: #fff;">
                                  Mark Complete
                              </button>
                              <button onclick="cancelProject('${developer.id}')" style="${buttonStyle} background: #dc3545; color: #fff;">
                                  Cancel Project
                              </button>
                          ` : ''}
                      </div>
          
                      ${developer.status === 'active' ? `
                          <div class="chat-section" style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee;">
                              <h4 style="margin: 0 0 15px 0; color: #333;">Project Chat</h4>
                              <div class="chat-messages" id="chat_${developer.id}" style="max-height: 200px; overflow-y: auto; padding: 10px; background: #f8f9fa; border-radius: 4px;">
                              </div>
                              <div style="display: flex; gap: 10px; margin-top: 10px;">
                                  <input type="text" id="messageInput_${developer.id}" placeholder="Type your message..." style="flex-grow: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                  <button onclick="sendMessage('${developer.id}')" style="${buttonStyle} background: #007bff; color: #fff;">
                                      Send
                                  </button>
                              </div>
                          </div>
                      ` : ''}
                  </div>
              `).join('');
          
              const script = document.createElement('script');
              script.textContent = `
                  function toggleHireForm(button) {
                      const card = button.closest('.developer-card');
                      const form = card.querySelector('.hire-form');
                      form.style.display = form.style.display === 'none' ? 'block' : 'none';
                  }
          
                  async function submitHireRequest(devId) {
                      const projectName = document.getElementById('projectName_' + devId).value;
                      const projectDesc = document.getElementById('projectDesc_' + devId).value;
                      const projectBudget = document.getElementById('projectBudget_' + devId).value;
                      const projectTimeframe = document.getElementById('projectTimeframe_' + devId).value;
                      
                      const projectData = {
                          developerId: devId,
                          clientId: localStorage.getItem('userEmail'),
                          projectName,
                          projectDesc,
                          projectBudget,
                          projectTimeframe,
                          status: 'pending',
                          timestamp: new Date().toISOString()
                      };

                      try {
                          const response = await fetch('https://swifttech-server.onrender.com/hire-request', {
                              method: 'POST',
                              headers: {
                                  'Content-Type': 'application/json'
                              },
                              body: JSON.stringify(projectData)
                          });

                          if (!response.ok) {
                              throw new Error('Network response was not ok');
                          }

                          alert('Hire request submitted successfully!');
                          toggleHireForm(document.querySelector('button[onclick="toggleHireForm(this)"]'));
                      } catch (error) {
                          console.error('Error submitting hire request:', error);
                          alert('Failed to submit hire request. Please try again.');
                      }
                  }
          
                  async function markComplete(devId) {
                      try {
                          const projectData = {
                              developerId: devId,
                              clientId: localStorage.getItem('userEmail')
                          };

                          const response = await fetch('https://swifttech-server.onrender.com/mark-complete', {
                              method: 'POST',
                              headers: {
                                  'Content-Type': 'application/json'
                              },
                              body: JSON.stringify(projectData)
                          });

                          if (!response.ok) {
                              throw new Error('Network response was not ok');
                          }

                          alert('Project marked as complete!');
                          location.reload();
                      } catch (error) {
                          console.error('Error marking project complete:', error);
                          alert('Failed to mark project as complete. Please try again.');
                      }
                  } 
                      
                  
                  async function cancelProject(devId) {
                      if (confirm('Are you sure you want to cancel this project?')) {
                          try {
                              const projectData = {
                                  developerId: devId,
                                  clientId: localStorage.getItem('userEmail')
                              };

                              const response = await fetch('https://swifttech-server.onrender.com/cancel-project', {
                                  method: 'POST',
                                  headers: {
                                      'Content-Type': 'application/json'
                                  },
                                  body: JSON.stringify(projectData)
                              });

                              if (!response.ok) {
                                  throw new Error('Network response was not ok');
                              }

                              alert('Project cancelled successfully!');
                              location.reload();
                          } catch (error) {
                              console.error('Error cancelling project:', error);
                              alert('Failed to cancel project. Please try again.');
                          }
                      }
                  }
          
                  async function sendMessage(devId) {
                      const messageInput = document.getElementById('messageInput_' + devId);
                      const message = messageInput.value.trim();
                      
                      if (message) {
                          try {
                              const messageData = {
                                  developerId: devId,
                                  senderId: localStorage.getItem('userEmail'),
                                  message,
                                  timestamp: new Date().toISOString()
                              };

                              const response = await fetch('https://swifttech-server.onrender.com/send-message', {
                                  method: 'POST',
                                  headers: {
                                      'Content-Type': 'application/json'
                                  },
                                  body: JSON.stringify(messageData)
                              });

                              if (!response.ok) {
                                  throw new Error('Network response was not ok');
                              }

                              messageInput.value = '';
                              
                              // Update chat display
                              const chatDiv = document.getElementById('chat_' + devId);
                              const messageElement = document.createElement('div');
                              messageElement.style.margin = '5px 0';
                              messageElement.style.padding = '8px';
                              messageElement.style.background = '#fff';
                              messageElement.style.borderRadius = '4px';
                              messageElement.textContent = message;
                              chatDiv.appendChild(messageElement);
                              chatDiv.scrollTop = chatDiv.scrollHeight;
                          } catch (error) {
                              console.error('Error sending message:', error);
                              alert('Failed to send message. Please try again.');
                          }
                      }
                  }

                  
                  // Set up real-time chat listeners
                  function initializeChatListeners(devId) {
                      fetch('https://swifttech-server.onrender.com/chat-messages/' + devId, {
                          method: 'GET',
                          headers: {
                              'Content-Type': 'application/json'
                          }
                      })
                      .then(response => response.json())
                      .then(messages => {
                          const chatDiv = document.getElementById('chat_' + devId);
                          messages.forEach(message => {
                              const messageElement = document.createElement('div');
                              messageElement.style.margin = '5px 0';
                              messageElement.style.padding = '8px';
                              messageElement.style.background = '#fff';
                              messageElement.style.borderRadius = '4px';
                              messageElement.textContent = message.message;
                              chatDiv.appendChild(messageElement);
                              chatDiv.scrollTop = chatDiv.scrollHeight;
                          });
                      })
                      .catch(error => console.error('Error fetching messages:', error));
}
              `;
              document.body.appendChild(script);

              // Initialize chat listeners for each active developer
              developers.forEach(dev => {
                  if (dev.status === 'active') {
                      initializeChatListeners(dev.id);
                  }
              });
          }          
          

          

                   async function loadTabContent(tabId) {
              const storedEmail = localStorage.getItem('userEmail');
              try {
                  const response = await fetch(`${API_URL}/${tabId}`, {
                      method: 'POST',
                      headers: {
                          'Content-Type': 'application/json'
                      },
                      body: JSON.stringify({ email: storedEmail })
                  });
                  const data = await response.json();
                  
                  switch(tabId) {
                      case 'dashboard':
                          updateDashboard(data);
                          break;
                      case 'templates':
                          renderTemplates(data.swifttech.templates);
                          break;
                      case 'snippets':
                          renderSnippets(data.swifttech.snippets);
                          break;
                      case 'courses':
                          renderCourses(data.swifttech.courses);
                          break;
                      case 'hire':
                          renderHire(data.swifttech.developers);
                          break;
                      case 'settings':
                          document.getElementById('settingsContent').innerHTML = renderSettings(data.settings);
                          break;
                      case 'subscription':
                          document.getElementById('subscriptionPlans').innerHTML = renderSubscription(data.subscription);
                          break;
                      case 'profile':
                          document.getElementById('profileContent').innerHTML = renderProfile(data.profile);
                          break;
                  }
              } catch (error) {
                  console.error(`Error loading ${tabId} data:`, error);
              }
          }

          function updateDashboard(data) {
              localStorage.setItem('userPlan', data.plan || 'free');
              document.getElementById('activeProjects').textContent = data.activeProjects || 0;
              document.getElementById('projectsGrowth').textContent = `${((data.activeProjects || 0) / 1000 * 100).toFixed(1)}%`;              
              document.getElementById('totalBudget').textContent = `$${(data.balance || 0).toFixed(2)}`;
              document.getElementById('budgetGrowth').textContent = `${((data.balance || 0) / 1000 * 100).toFixed(1)}%`;
              document.getElementById('completedProjects').textContent = data.completedProjects ? data.completedProjects : '0';              
              document.getElementById('tasksStatus').textContent = 'On Track';

              const projectList = document.getElementById('projectList');
              if (data.projects && data.projects.length > 0) {
                  projectList.style.maxHeight = '100px';
                  projectList.style.overflowY = 'auto';
                  projectList.style.scrollbarWidth = 'thin';
                  projectList.style.scrollbarColor = '#888 #f1f1f1';
                  projectList.innerHTML = data.projects.map(project => `
                      <div class="project-item" style="padding: 15px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; height: 90px;">
                          <div>
                              <h4 style="color: #333;">${project.name || 'Untitled Project'}</h4>
                              <p style="color: #666; font-size: 0.9rem;">ID: ${project.id || 'none'}</p>
                          </div>
                          <span class="status" style="background: ${project.status === 'In Progress' ? '#e8f5e9' : '#fff3e0'}; 
                              color: ${project.status === 'In Progress' ? '#28a745' : '#f57c00'}; 
                              padding: 5px 10px; border-radius: 15px; font-size: 0.8rem;">${project.status || 'Unknown'}</span>
                      </div>
                  `).join('');
                  projectList.style.cssText += `
                    &::-webkit-scrollbar {
                      width: 8px;
                    }
                    &::-webkit-scrollbar-track {
                      background: #f1f1f1;
                      border-radius: 4px;
                    }
                    &::-webkit-scrollbar-thumb {
                      background: #888;
                      border-radius: 4px;
                    }
                    &::-webkit-scrollbar-thumb:hover {
                      background: #555;
                    }
                  `;
              } else {                  
                projectList.innerHTML = '<div style="padding: 15px; text-align: center;">No projects available</div>';
              }
          
              const teamList = document.getElementById('teamList');
              teamList.innerHTML = `
                  <div class="team-member" style="display: flex; align-items: center; margin-bottom: 15px;">
                      <img src="${data.profile?.profilePicture || 'default-avatar.png'}" alt="Profile Picture" style="width: 40px; height: 40px; border-radius: 50%; margin-right: 10px;">
                      <div>
                          <h4 style="color: #333; font-size: 0.9rem;">${data.profile?.email || 'Unknown User'}</h4>
                          <p style="color: #666; font-size: 0.8rem;">Account Status: ${data.accountStatus || 'active'}</p>
                          <p style="color: #666; font-size: 0.8rem;">Plan Type: ${localStorage.getItem('userPlan') || 'free'}</p>
                      </div>
                  </div>
              `;
          }

          loadTabContent('dashboard');
          </script>      
      </body>  
      </html>
